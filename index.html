<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Site Admin</title>
    <style>
      body{margin:0;background:#0b0d10;color:#e8eef7;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto}
      header{padding:14px 18px;border-bottom:1px solid #20242a}
      .wrap{max-width:1100px;margin:0 auto}
    </style>
    <!-- Tell Decap we will pass the config manually -->
    <script>window.CMS_MANUAL_INIT = true;</script>
  </head>
  <body>
    <header><div class="wrap">Site Admin</div></header>

    <!-- Decap CMS -->
    <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>

    <script>
      // Force Netlify Identity + Git Gateway (NOT GitHub button)
      CMS.init({
        config: {
          backend: { name: 'git-gateway', branch: 'main' },

          media_folder: 'assets/uploads',
          public_folder: '/assets/uploads',

          collections: [
            {
              name: 'site',
              label: 'Site Content',
              files: [
                {
                  file: 'content/site.json',
                  label: 'Homepage',
                  name: 'homepage',
                  fields: [
                    { label: 'Events Text', name: 'eventsText', widget: 'text' },
                    { label: 'Types Text',  name: 'typesText',  widget: 'text' },
                    { label: 'About Text',  name: 'aboutText',  widget: 'text' },
                    { label: 'Showreel HTML', name: 'showreelHTML', widget: 'text' },
                    { label: 'Header Image', name: 'header', widget: 'image' },
                    {
                      label: 'Background',
                      name: 'background',
                      widget: 'object',
                      fields: [
                        { label: 'bg1', name: 'bg1', widget: 'string', default: '#1a0030' },
                        { label: 'bg2', name: 'bg2', widget: 'string', default: '#320046' },
                        { label: 'surge1', name: 'surge1', widget: 'string', default: '#ff2a8a' },
                        { label: 'surge2', name: 'surge2', widget: 'string', default: '#1ea7ff' },
                        { label: 'surge3', name: 'surge3', widget: 'string', default: '#ff3d4f' },
                        { label: 'glitter', name: 'glitter', widget: 'number', value_type: 'float', min: 0, max: 1, step: 0.05, default: 0.7 }
                      ]
                    },
                    {
                      label: 'Gallery',
                      name: 'gallery',
                      widget: 'list',
                      fields: [
                        { label: 'Name', name: 'name', widget: 'string', required: false },
                        { label: 'Image', name: 'data', widget: 'image' }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      });
    </script>
  </body>
</html>
